(()=>{"use strict";var e,t={39:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=i.p+"fedc4d2bad9c84c685c01b50793c315e.png"},924:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(232),a=new s.Vector3,r=new s.Spherical;t.default=class{constructor(e,t){this.camera=t,this._viewHalfX=0,this._viewHalfY=0,this._enabled=!0,this.domElement=e,this._movementSpeed=1,this._lookSpeed=.05,this._lookVertical=!0,this._autoForward=!1,this._activeLook=!1,this._heightSpeed=!1,this._heightCoef=1,this._heightMin=0,this._heightMax=1,this._constrainVertical=!1,this._verticalMin=0,this._verticalMax=Math.PI,this._mouseDragOn=!1,this._constrainVertical=!1,this._verticalMin=0,this._verticalMax=Math.PI,this._mouseDragOn=!1,this._autoSpeedFactor=0,this._mouseX=0,this._mouseY=0,this._moveForward=!1,this._moveBackward=!1,this._moveLeft=!1,this._moveRight=!1,this._moveUp=!1,this._moveDown=!1,this._viewHalfX=0,this._viewHalfY=0,this._lat=0,this._lon=0,window.addEventListener("keydown",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this._moveForward=!0;break;case"ArrowLeft":case"KeyA":this._moveLeft=!0;break;case"ArrowDown":case"KeyS":this._moveBackward=!0;break;case"ArrowRight":case"KeyD":this._moveRight=!0;break;case"KeyR":this._moveUp=!0;break;case"KeyF":this._moveDown=!0}})),window.addEventListener("keyup",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this._moveForward=!1;break;case"ArrowLeft":case"KeyA":this._moveLeft=!1;break;case"ArrowDown":case"KeyS":this._moveBackward=!1;break;case"ArrowRight":case"KeyD":this._moveRight=!1;break;case"KeyR":this._moveUp=!1;break;case"KeyF":this._moveDown=!1}})),this.domElement.addEventListener("mousedown",(e=>{0===e.button&&(this._activeLook=!0),this._mouseDragOn=!0})),this.domElement.addEventListener("mousemove",(e=>{this._activeLook&&(this._mouseX=e.pageX-this.domElement.offsetLeft-this._viewHalfX,this._mouseY=e.pageY-this.domElement.offsetTop-this._viewHalfY)})),this.domElement.addEventListener("mouseup",(e=>{0===e.button&&(this._activeLook=!1),this._mouseDragOn=!1})),this.domElement.addEventListener("contextmenu",this.contextmenu),this.onResize(),this.setOrientation()}setOrientation(){const e=this.camera.quaternion;a.set(0,0,-1).applyQuaternion(e),r.setFromVector3(a),this._lat=90-s.MathUtils.radToDeg(r.phi),this._lon=s.MathUtils.radToDeg(r.theta)}onResize(){this._viewHalfX=this.domElement.offsetWidth/2,this._viewHalfY=this.domElement.offsetHeight/2}update(e){if(!1===this._enabled)return;if(this._heightSpeed){const t=s.MathUtils.clamp(this.camera.position.y,this._heightMin,this._heightMax)-this._heightMin;this._autoSpeedFactor=e*(t*this._heightCoef)}else this._autoSpeedFactor=0;const t=e*this._movementSpeed;(this._moveForward||this._autoForward&&!this._moveBackward)&&this.camera.translateZ(-(t+this._autoSpeedFactor)),this._moveBackward&&this.camera.translateZ(t),this._moveLeft&&this.camera.translateX(-t),this._moveRight&&this.camera.translateX(t),this._moveUp&&this.camera.translateY(t),this._moveDown&&this.camera.translateY(-t);let i=e*this._lookSpeed;this._activeLook||(i=0);let a=1;this._constrainVertical&&(a=Math.PI/(this._verticalMax-this._verticalMin)),this._lon-=this._mouseX*i,this._lookVertical&&(this._lat-=this._mouseY*i*a),this._lat=Math.max(-85,Math.min(85,this._lat));let r=s.MathUtils.degToRad(90-this._lat);const o=s.MathUtils.degToRad(this._lon);this._constrainVertical&&(r=s.MathUtils.mapLinear(r,0,Math.PI,this._verticalMin,this._verticalMax));const n=this.camera.position,h=new s.Vector3;h.setFromSphericalCoords(1,r,o).add(n),this.camera.lookAt(h)}contextmenu(e){e.preventDefault()}dispose(){}}},535:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(i(924)),r=s(i(767)),o=i(232);t.default=class{constructor(e){this._container=e,this.update=()=>{const e=this._clock.getDelta();this._cameraController.update(e),requestAnimationFrame(this.update),this.renderer.render(this.scene,this._camera)},this.scene=new o.Scene,this._clock=new o.Clock,this._camera=new o.PerspectiveCamera(45,1.25,.01,1e3),this.renderer=new o.WebGLRenderer,this._cameraController=new a.default(this._container,this._camera),this._camera.position.add(new o.Vector3(0,1,0)),this._terrain=new r.default,this._initialize(this._container)}_initialize(e){this.renderer.setSize(window.innerWidth,window.innerHeight),e.appendChild(this.renderer.domElement),window.addEventListener("resize",(e=>{this.onResize(e)}));const t=new o.BoxGeometry(1,1,1),i=new o.MeshBasicMaterial({color:65280}),s=new o.Mesh(t,i);this.scene.add(s),this.scene.add(this._terrain.mesh),this._camera.position.z=5,requestAnimationFrame(this.update)}onResize(e){this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this.renderer.setSize(this._container.clientWidth,this._container.clientHeight),this._cameraController.onResize()}}},767:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(232),r=s(i(39));t.default=class{constructor(){this._geometry=new a.PlaneGeometry(100,100,100),this._geometry.rotateX(-90*a.MathUtils.DEG2RAD),this._material=new a.MeshBasicMaterial({color:65535}),this._diffused=(new a.TextureLoader).load(r.default),this._diffused.wrapS=a.RepeatWrapping,this._diffused.wrapT=a.RepeatWrapping,this._material.map=this._diffused,this._material.map.repeat=new a.Vector2(50,50),this._mesh=new a.Mesh(this._geometry,this._material)}get mesh(){return this._mesh}}},607:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=s(i(535));t.App=new class{constructor(e){this._initializeView(e),this._engine=new a.default(e)}get Engine(){return this._engine}_initializeView(e){e.style.height="100vh",e.style.width="100%",e.style.background="#646464",e.style.border="1"}}(document.getElementById("gameContainer"))}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,i,a,r)=>{if(!i){var o=1/0;for(l=0;l<e.length;l++){for(var[i,a,r]=e[l],n=!0,h=0;h<i.length;h++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](i[h])))?i.splice(h--,1):(n=!1,r<o&&(o=r));if(n){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={index:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,r,[o,n,h]=i,c=0;if(o.some((t=>0!==e[t]))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(h)var l=h(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(l)},i=self.webpackChunkgame_sample=self.webpackChunkgame_sample||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,["vendors-node_modules_three_build_three_cjs"],(()=>s(607)));a=s.O(a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnhDLEVBQUksRUFDM0IsR0FBR0wsRUFBU2dELE1BQU1DLEdBQWdDLElBQXhCUixFQUFnQlEsS0FBYSxDQUN0RCxJQUFJM0QsS0FBWXdELEVBQ1p6RCxFQUFvQjRCLEVBQUU2QixFQUFheEQsS0FDckNELEVBQW9CUSxFQUFFUCxHQUFZd0QsRUFBWXhELElBR2hELEdBQUd5RCxFQUFTLElBQUloRCxFQUFTZ0QsRUFBUTFELEVBQ2xDLENBRUEsSUFER3VELEdBQTRCQSxFQUEyQkMsR0FDckR4QyxFQUFJTCxFQUFTTSxPQUFRRCxJQUN6QnFDLEVBQVUxQyxFQUFTSyxHQUNoQmhCLEVBQW9CNEIsRUFBRXdCLEVBQWlCQyxJQUFZRCxFQUFnQkMsSUFDckVELEVBQWdCQyxHQUFTLEtBRTFCRCxFQUFnQkMsR0FBVyxFQUU1QixPQUFPckQsRUFBb0JTLEVBQUVDLEVBQU8sRUFHakNtRCxFQUFxQkMsS0FBOEIsd0JBQUlBLEtBQThCLHlCQUFLLEdBQzlGRCxFQUFtQkUsUUFBUVQsRUFBcUJVLEtBQUssS0FBTSxJQUMzREgsRUFBbUJJLEtBQU9YLEVBQXFCVSxLQUFLLEtBQU1ILEVBQW1CSSxLQUFLRCxLQUFLSCxHLEtDN0N2RixJQUFJSyxFQUFzQmxFLEVBQW9CUyxPQUFFTixFQUFXLENBQUMsK0NBQStDLElBQU9ILEVBQW9CLE9BQ3RJa0UsRUFBc0JsRSxFQUFvQlMsRUFBRXlELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL2dhbWUtc2FtcGxlLy4vc3JjL2ltZy9ncm91bmRfZ3Jhc3NfZ2VuXzEwLnBuZyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS8uL3NyYy9DYW1lcmFDb250cm9sbGVyLnRzIiwid2VicGFjazovL2dhbWUtc2FtcGxlLy4vc3JjL0dhbWVFbmdpbmUudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvLi9zcmMvVGVycmFpbi50cyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2dhbWUtc2FtcGxlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmZWRjNGQyYmFkOWM4NGM2ODVjMDFiNTA3OTNjMzE1ZS5wbmdcIjsiLCJpbXBvcnQge1xuICAgIEV2ZW50RGlzcGF0Y2hlcixcbiAgICBRdWF0ZXJuaW9uLFxuICAgIFZlY3RvcjMsXG4gICAgUGVyc3BlY3RpdmVDYW1lcmEsXG4gICAgTWF0aFV0aWxzLFxuICAgIFNwaGVyaWNhbFxufSBmcm9tICd0aHJlZSc7XG5cbmNvbnN0IGxvb2tEaXJlY3Rpb24gPSBuZXcgVmVjdG9yMygpO1xuY29uc3Qgc3BoZXJpY2FsID0gbmV3IFNwaGVyaWNhbCgpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmFDb250cm9sbGVyIHtcblxuICAgIHByaXZhdGUgZG9tRWxlbWVudCA6IEhUTUxFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBfZW5hYmxlZCA6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIF9tb3ZlbWVudFNwZWVkIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2xvb2tTcGVlZCA6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX2xvb2tWZXJ0aWNhbCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfYXV0b0ZvcndhcmQgOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfYWN0aXZlTG9vayA6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIF9oZWlnaHRTcGVlZCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfaGVpZ2h0Q29lZiA6IG51bWJlcjtcbiAgICBwcml2YXRlIF9oZWlnaHRNaW4gOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfaGVpZ2h0TWF4IDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfY29uc3RyYWluVmVydGljYWwgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX3ZlcnRpY2FsTWluIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3ZlcnRpY2FsTWF4IDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfbW91c2VEcmFnT24gOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfYXV0b1NwZWVkRmFjdG9yIDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfbW91c2VYIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX21vdXNlWSA6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX21vdmVGb3J3YXJkIDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9tb3ZlQmFja3dhcmQgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX21vdmVMZWZ0IDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9tb3ZlUmlnaHQgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX21vdmVVcCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfbW92ZURvd24gOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfdmlld0hhbGZYID0gMDtcbiAgICBwcml2YXRlIF92aWV3SGFsZlkgPSAwO1xuXG4gICAgcHJpdmF0ZSBfbGF0IDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2xvbiA6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoZG9tRWxlbWVudCA6IEhUTUxFbGVtZW50LCBwcml2YXRlIGNhbWVyYSA6IFBlcnNwZWN0aXZlQ2FtZXJhKSB7IC8vIEFQSVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuICAgICAgICB0aGlzLl9tb3ZlbWVudFNwZWVkID0gMS4wO1xuICAgICAgICB0aGlzLl9sb29rU3BlZWQgPSAwLjA1O1xuICAgICAgICB0aGlzLl9sb29rVmVydGljYWwgPSB0cnVlO1xuICAgICAgICB0aGlzLl9hdXRvRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hY3RpdmVMb29rID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2hlaWdodFNwZWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2hlaWdodENvZWYgPSAxLjA7XG4gICAgICAgIHRoaXMuX2hlaWdodE1pbiA9IDAuMDtcbiAgICAgICAgdGhpcy5faGVpZ2h0TWF4ID0gMS4wO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW5WZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1pbiA9IDA7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTWF4ID0gTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9jb25zdHJhaW5WZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1pbiA9IDA7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTWF4ID0gTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYXV0b1NwZWVkRmFjdG9yID0gMC4wO1xuICAgICAgICB0aGlzLl9tb3VzZVggPSAwO1xuICAgICAgICB0aGlzLl9tb3VzZVkgPSAwO1xuXG4gICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3ZlTGVmdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbW92ZVVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdmVEb3duID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fdmlld0hhbGZYID0gMDtcbiAgICAgICAgdGhpcy5fdmlld0hhbGZZID0gMDtcblxuICAgICAgICB0aGlzLl9sYXQgPSAwO1xuICAgICAgICB0aGlzLl9sb24gPSAwO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSA6IEtleWJvYXJkRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdLZXlBJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Uyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5RCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Uic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVVcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0tleUYnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSA6IEtleWJvYXJkRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5QSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdLZXlTJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUJhY2t3YXJkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5RCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlVXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Ric6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVEb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlIDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlTG9vayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURyYWdPbiA9IHRydWU7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUgOiBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVMb29rKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW91c2VYID0gZS5wYWdlWCAtIHRoaXMuZG9tRWxlbWVudC5vZmZzZXRMZWZ0IC0gdGhpcy5fdmlld0hhbGZYO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdXNlWSA9IGUucGFnZVkgLSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0VG9wIC0gdGhpcy5fdmlld0hhbGZZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoZSA6IE1vdXNlRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlTG9vayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLmNvbnRleHRtZW51KTtcblxuXG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICB0aGlzLnNldE9yaWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgc2V0T3JpZW50YXRpb24oKSB7XG5cbiAgICAgICAgY29uc3QgcXVhdGVybmlvbiA9IHRoaXMuY2FtZXJhLnF1YXRlcm5pb247XG5cbiAgICAgICAgbG9va0RpcmVjdGlvbi5zZXQoMCwgMCwgLSAxKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbik7XG4gICAgICAgIHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyhsb29rRGlyZWN0aW9uKTtcblxuICAgICAgICB0aGlzLl9sYXQgPSA5MCAtIE1hdGhVdGlscy5yYWRUb0RlZyhzcGhlcmljYWwucGhpKTtcbiAgICAgICAgdGhpcy5fbG9uID0gTWF0aFV0aWxzLnJhZFRvRGVnKHNwaGVyaWNhbC50aGV0YSk7XG5cbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpIHtcblxuICAgICAgICB0aGlzLl92aWV3SGFsZlggPSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICB0aGlzLl92aWV3SGFsZlkgPSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcblxuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YSA6IG51bWJlcikge1xuXG4gICAgICAgIGlmICh0aGlzLl9lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2hlaWdodFNwZWVkKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoVXRpbHMuY2xhbXAodGhpcy5jYW1lcmEucG9zaXRpb24ueSwgdGhpcy5faGVpZ2h0TWluLCB0aGlzLl9oZWlnaHRNYXgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0RGVsdGEgPSB5IC0gdGhpcy5faGVpZ2h0TWluO1xuXG4gICAgICAgICAgICB0aGlzLl9hdXRvU3BlZWRGYWN0b3IgPSBkZWx0YSAqIChoZWlnaHREZWx0YSAqIHRoaXMuX2hlaWdodENvZWYpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hdXRvU3BlZWRGYWN0b3IgPSAwLjA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhY3R1YWxNb3ZlU3BlZWQgPSBkZWx0YSAqIHRoaXMuX21vdmVtZW50U3BlZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX21vdmVGb3J3YXJkIHx8ICh0aGlzLl9hdXRvRm9yd2FyZCAmJiAhdGhpcy5fbW92ZUJhY2t3YXJkKSkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVaKC0oYWN0dWFsTW92ZVNwZWVkICsgdGhpcy5fYXV0b1NwZWVkRmFjdG9yKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fbW92ZUJhY2t3YXJkKSBcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zbGF0ZVooYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlTGVmdCkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVYKC0gYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlUmlnaHQpIFxuICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNsYXRlWChhY3R1YWxNb3ZlU3BlZWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX21vdmVVcCkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVZKGFjdHVhbE1vdmVTcGVlZCk7XG4gICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlRG93bikgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVZKC0gYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhY3R1YWxMb29rU3BlZWQgPSBkZWx0YSAqIHRoaXMuX2xvb2tTcGVlZDtcblxuICAgICAgICBpZiAoIXRoaXMuX2FjdGl2ZUxvb2spIHtcbiAgICAgICAgICAgIGFjdHVhbExvb2tTcGVlZCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmVydGljYWxMb29rUmF0aW8gPSAxO1xuICAgICAgICBpZiAodGhpcy5fY29uc3RyYWluVmVydGljYWwpIHtcbiAgICAgICAgICAgIHZlcnRpY2FsTG9va1JhdGlvID0gTWF0aC5QSSAvICh0aGlzLl92ZXJ0aWNhbE1heCAtIHRoaXMuX3ZlcnRpY2FsTWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvbiAtPSB0aGlzLl9tb3VzZVggKiBhY3R1YWxMb29rU3BlZWQ7XG4gICAgICAgIGlmICh0aGlzLl9sb29rVmVydGljYWwpIFxuICAgICAgICAgICAgdGhpcy5fbGF0IC09IHRoaXMuX21vdXNlWSAqIGFjdHVhbExvb2tTcGVlZCAqIHZlcnRpY2FsTG9va1JhdGlvO1xuICAgICAgICBcblxuICAgICAgICB0aGlzLl9sYXQgPSBNYXRoLm1heCgtIDg1LCBNYXRoLm1pbig4NSwgdGhpcy5fbGF0KSk7XG5cbiAgICAgICAgbGV0IHBoaSA9IE1hdGhVdGlscy5kZWdUb1JhZCg5MCAtIHRoaXMuX2xhdCk7XG4gICAgICAgIGNvbnN0IHRoZXRhID0gTWF0aFV0aWxzLmRlZ1RvUmFkKHRoaXMuX2xvbik7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbnN0cmFpblZlcnRpY2FsKSB7XG4gICAgICAgICAgICBwaGkgPSBNYXRoVXRpbHMubWFwTGluZWFyKHBoaSwgMCwgTWF0aC5QSSwgdGhpcy5fdmVydGljYWxNaW4sIHRoaXMuX3ZlcnRpY2FsTWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYW1lcmEucG9zaXRpb247XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0YXJnZXRQb3NpdGlvbi5zZXRGcm9tU3BoZXJpY2FsQ29vcmRzKDEsIHBoaSwgdGhldGEpLmFkZChwb3NpdGlvbik7XG5cbiAgICAgICAgdGhpcy5jYW1lcmEubG9va0F0KHRhcmdldFBvc2l0aW9uKTtcblxuICAgIH1cblxuICAgIGNvbnRleHRtZW51KGV2ZW50IDogTW91c2VFdmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKSB7IFxuXG4gICAgfTtcblxufVxuIiwiaW1wb3J0IENhbWVyYUNvbnRyb2xsZXIgZnJvbSAnLi9DYW1lcmFDb250cm9sbGVyJztcbmltcG9ydCBUZXJyYWluIGZyb20gJy4vVGVycmFpbic7XG5cbmltcG9ydCB7XG4gICAgU2NlbmUsIFJlbmRlcmVyLCBQZXJzcGVjdGl2ZUNhbWVyYSwgV2ViR0xSZW5kZXJlciwgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIEJveEdlb21ldHJ5LCBDbG9jaywgVmVjdG9yM1xufVxuZnJvbSBcInRocmVlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICAgIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIF9jYW1lcmE6IFBlcnNwZWN0aXZlQ2FtZXJhO1xuICAgIHByaXZhdGUgX2NhbWVyYUNvbnRyb2xsZXI6IENhbWVyYUNvbnRyb2xsZXI7XG4gICAgcmVuZGVyZXI6IFJlbmRlcmVyO1xuICAgIHByaXZhdGUgX2Nsb2NrOiBDbG9jaztcblxuICAgIHByaXZhdGUgX3RlcnJhaW4gOiBUZXJyYWluO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgICAgIHRoaXMuX2Nsb2NrID0gbmV3IENsb2NrKCk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCAxLjI1LCAuMDEsIDEwMDApO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFdlYkdMUmVuZGVyZXIoKTsgICAgICAgIFxuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyID0gbmV3IENhbWVyYUNvbnRyb2xsZXIodGhpcy5fY29udGFpbmVyLCB0aGlzLl9jYW1lcmEpO1xuICAgICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb24uYWRkKG5ldyBWZWN0b3IzKDAsMSwwKSk7XG5cbiAgICAgICAgdGhpcy5fdGVycmFpbiA9IG5ldyBUZXJyYWluKCk7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemUodGhpcy5fY29udGFpbmVyKVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNjZW5lXG4gICAgICogQHBhcmFtIHBhcmVudCBodG1sIG5vZGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9pbml0aWFsaXplKGNvbnRhaW5lciA6IEhUTUxFbGVtZW50KSB7XG5cblxuXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKGU6VUlFdmVudCk9PiB7IHRoaXMub25SZXNpemUoZSl9KVxuXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEJveEdlb21ldHJ5KDEsIDEsIDEpO1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgICAgIGNvbnN0IGN1YmUgPSBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuICAgICAgICB0aGlzLnNjZW5lLmFkZChjdWJlKTtcblxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLl90ZXJyYWluLm1lc2gpO1xuXG5cbiAgICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uLnogPSA1O1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpO1xuICAgIH1cblxuICAgIG9uUmVzaXplKGU6VUlFdmVudCkge1xuICAgICAgICB0aGlzLl9jYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuX2NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh0aGlzLl9jb250YWluZXIuY2xpZW50V2lkdGgsIHRoaXMuX2NvbnRhaW5lci5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLm9uUmVzaXplKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlID0gKCgpID0+IHsgXG4gICAgICAgIC8vIGdldCBkdFxuICAgICAgICBjb25zdCBkdCA9IHRoaXMuX2Nsb2NrLmdldERlbHRhKCk7XG4gICAgICAgIFxuICAgICAgICAvLyB1cGRhdGUgc3R1ZmZcbiAgICAgICAgdGhpcy5fY2FtZXJhQ29udHJvbGxlci51cGRhdGUoZHQpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpOyBcblxuICAgICAgICAvL3JlbmRlclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLl9jYW1lcmEpOyBcbiAgICB9KTtcblxuXG59XG4iLCJpbXBvcnQge1xuICAgIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBQbGFuZUdlb21ldHJ5LCBNYXRoVXRpbHMsIFRleHR1cmUsIFRleHR1cmVMb2FkZXIsIFZlY3RvcjIsIE1pcnJvcmVkUmVwZWF0V3JhcHBpbmcsIFJlcGVhdFdyYXBwaW5nXG59IGZyb20gJ3RocmVlJztcblxuaW1wb3J0IGdyb3VuZCBmcm9tIFwiLi9pbWcvZ3JvdW5kX2dyYXNzX2dlbl8xMC5wbmdcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVycmFpbiB7XG5cbiAgICBwcml2YXRlIF9tZXNoOiBNZXNoO1xuICAgIHByaXZhdGUgX2dlb21ldHJ5OiBQbGFuZUdlb21ldHJ5O1xuICAgIHByaXZhdGUgX21hdGVyaWFsOiBNZXNoQmFzaWNNYXRlcmlhbDtcbiAgICBwcml2YXRlIF9kaWZmdXNlZDogVGV4dHVyZTtcblxuICAgIGdldCBtZXNoKCkgOiBNZXNoIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lc2g7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkoMTAwLCAxMDAsIDEwMCk7XG4gICAgICAgIHRoaXMuX2dlb21ldHJ5LnJvdGF0ZVgoTWF0aFV0aWxzLkRFRzJSQUQgKiAtOTApOyAgICAgICAgXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmZ9KTtcbiAgICAgICAgdGhpcy5fZGlmZnVzZWQgPSBuZXcgVGV4dHVyZUxvYWRlcigpLmxvYWQoIGdyb3VuZCApOyAgICAgICAgXG4gICAgICAgIHRoaXMuX2RpZmZ1c2VkLndyYXBTID0gUmVwZWF0V3JhcHBpbmc7XG4gICAgICAgIHRoaXMuX2RpZmZ1c2VkLndyYXBUID0gUmVwZWF0V3JhcHBpbmc7XG5cblxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5tYXAgPSB0aGlzLl9kaWZmdXNlZDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwubWFwLnJlcGVhdCA9IG5ldyBWZWN0b3IyKDUwLDUwKTtcblxuICAgICAgICB0aGlzLl9tZXNoID0gbmV3IE1lc2godGhpcy5fZ2VvbWV0cnksIHRoaXMuX21hdGVyaWFsKTsgICAgICAgIFxuICAgIH1cbn0iLCJpbXBvcnQgeyBHYW1lQ29udGFpbmVyIH0gZnJvbSBcIi4vR2FtZUNvbnRhaW5lclwiO1xuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9HYW1lRW5naW5lJztcblxuY2xhc3MgX0FwcCB7XG4gICAgcHJpdmF0ZSBfZW5naW5lOiBHYW1lRW5naW5lO1xuXG4gICAgZ2V0IEVuZ2luZSgpOiBHYW1lRW5naW5lIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9ICAgIFxuXG4gICAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVZpZXcocm9vdCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IG5ldyBHYW1lRW5naW5lKHJvb3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2luaXRpYWxpemVWaWV3KHJvb3Q6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJvb3Quc3R5bGUuaGVpZ2h0ID0gXCIxMDB2aFwiO1xuICAgICAgICByb290LnN0eWxlLndpZHRoID0gXCIxMDAlXCJcbiAgICAgICAgcm9vdC5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjNjQ2NDY0XCI7XG4gICAgICAgIHJvb3Quc3R5bGUuYm9yZGVyID0gXCIxXCI7ICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IEFwcCA9IG5ldyBfQXBwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZUNvbnRhaW5lclwiKSBhcyBIVE1MRWxlbWVudCk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcImluZGV4XCI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2dhbWVfc2FtcGxlXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2dhbWVfc2FtcGxlXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJ2ZW5kb3JzLW5vZGVfbW9kdWxlc190aHJlZV9idWlsZF90aHJlZV9janNcIl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDYwNykpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImxvb2tEaXJlY3Rpb24iLCJWZWN0b3IzIiwic3BoZXJpY2FsIiwiU3BoZXJpY2FsIiwiY29uc3RydWN0b3IiLCJkb21FbGVtZW50IiwiY2FtZXJhIiwiX3ZpZXdIYWxmWCIsIl92aWV3SGFsZlkiLCJ0aGlzIiwiX2VuYWJsZWQiLCJfbW92ZW1lbnRTcGVlZCIsIl9sb29rU3BlZWQiLCJfbG9va1ZlcnRpY2FsIiwiX2F1dG9Gb3J3YXJkIiwiX2FjdGl2ZUxvb2siLCJfaGVpZ2h0U3BlZWQiLCJfaGVpZ2h0Q29lZiIsIl9oZWlnaHRNaW4iLCJfaGVpZ2h0TWF4IiwiX2NvbnN0cmFpblZlcnRpY2FsIiwiX3ZlcnRpY2FsTWluIiwiX3ZlcnRpY2FsTWF4IiwiTWF0aCIsIlBJIiwiX21vdXNlRHJhZ09uIiwiX2F1dG9TcGVlZEZhY3RvciIsIl9tb3VzZVgiLCJfbW91c2VZIiwiX21vdmVGb3J3YXJkIiwiX21vdmVCYWNrd2FyZCIsIl9tb3ZlTGVmdCIsIl9tb3ZlUmlnaHQiLCJfbW92ZVVwIiwiX21vdmVEb3duIiwiX2xhdCIsIl9sb24iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvZGUiLCJidXR0b24iLCJwYWdlWCIsIm9mZnNldExlZnQiLCJwYWdlWSIsIm9mZnNldFRvcCIsImNvbnRleHRtZW51Iiwib25SZXNpemUiLCJzZXRPcmllbnRhdGlvbiIsInF1YXRlcm5pb24iLCJzZXQiLCJhcHBseVF1YXRlcm5pb24iLCJzZXRGcm9tVmVjdG9yMyIsIk1hdGhVdGlscyIsInJhZFRvRGVnIiwicGhpIiwidGhldGEiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsInVwZGF0ZSIsImRlbHRhIiwiaGVpZ2h0RGVsdGEiLCJjbGFtcCIsInBvc2l0aW9uIiwieSIsImFjdHVhbE1vdmVTcGVlZCIsInRyYW5zbGF0ZVoiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlWSIsImFjdHVhbExvb2tTcGVlZCIsInZlcnRpY2FsTG9va1JhdGlvIiwibWF4IiwibWluIiwiZGVnVG9SYWQiLCJtYXBMaW5lYXIiLCJ0YXJnZXRQb3NpdGlvbiIsInNldEZyb21TcGhlcmljYWxDb29yZHMiLCJhZGQiLCJsb29rQXQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiZGlzcG9zZSIsIl9jb250YWluZXIiLCJkdCIsIl9jbG9jayIsImdldERlbHRhIiwiX2NhbWVyYUNvbnRyb2xsZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyZW5kZXJlciIsInJlbmRlciIsInNjZW5lIiwiX2NhbWVyYSIsIlNjZW5lIiwiQ2xvY2siLCJQZXJzcGVjdGl2ZUNhbWVyYSIsIldlYkdMUmVuZGVyZXIiLCJfdGVycmFpbiIsIl9pbml0aWFsaXplIiwiY29udGFpbmVyIiwic2V0U2l6ZSIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImFwcGVuZENoaWxkIiwiZ2VvbWV0cnkiLCJCb3hHZW9tZXRyeSIsIm1hdGVyaWFsIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJjb2xvciIsImN1YmUiLCJNZXNoIiwibWVzaCIsInoiLCJhc3BlY3QiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJfZ2VvbWV0cnkiLCJQbGFuZUdlb21ldHJ5Iiwicm90YXRlWCIsIkRFRzJSQUQiLCJfbWF0ZXJpYWwiLCJfZGlmZnVzZWQiLCJUZXh0dXJlTG9hZGVyIiwibG9hZCIsIndyYXBTIiwiUmVwZWF0V3JhcHBpbmciLCJ3cmFwVCIsIm1hcCIsInJlcGVhdCIsIlZlY3RvcjIiLCJfbWVzaCIsIkFwcCIsInJvb3QiLCJfaW5pdGlhbGl6ZVZpZXciLCJfZW5naW5lIiwiRW5naW5lIiwic3R5bGUiLCJoZWlnaHQiLCJ3aWR0aCIsImJhY2tncm91bmQiLCJib3JkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwibSIsIk8iLCJyZXN1bHQiLCJjaHVua0lkcyIsImZuIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImkiLCJsZW5ndGgiLCJmdWxmaWxsZWQiLCJqIiwiT2JqZWN0Iiwia2V5cyIsImV2ZXJ5Iiwia2V5Iiwic3BsaWNlIiwiciIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJzb21lIiwiaWQiLCJjaHVua0xvYWRpbmdHbG9iYWwiLCJzZWxmIiwiZm9yRWFjaCIsImJpbmQiLCJwdXNoIiwiX193ZWJwYWNrX2V4cG9ydHNfXyJdLCJzb3VyY2VSb290IjoiIn0=