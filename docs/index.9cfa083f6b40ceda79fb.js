(()=>{"use strict";var e,t={39:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});const s=i.p+"fedc4d2bad9c84c685c01b50793c315e.png"},924:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(232),a=new s.Vector3,r=new s.Spherical;t.default=class{constructor(e,t){this.camera=t,this._viewHalfX=0,this._viewHalfY=0,this._enabled=!0,this.domElement=e,this._movementSpeed=1,this._lookSpeed=.05,this._lookVertical=!0,this._autoForward=!1,this._activeLook=!1,this._heightSpeed=!1,this._heightCoef=1,this._heightMin=0,this._heightMax=1,this._constrainVertical=!1,this._verticalMin=0,this._verticalMax=Math.PI,this._mouseDragOn=!1,this._constrainVertical=!1,this._verticalMin=0,this._verticalMax=Math.PI,this._mouseDragOn=!1,this._autoSpeedFactor=0,this._mouseX=0,this._mouseY=0,this._moveForward=!1,this._moveBackward=!1,this._moveLeft=!1,this._moveRight=!1,this._moveUp=!1,this._moveDown=!1,this._viewHalfX=0,this._viewHalfY=0,this._lat=0,this._lon=0,window.addEventListener("keydown",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this._moveForward=!0;break;case"ArrowLeft":case"KeyA":this._moveLeft=!0;break;case"ArrowDown":case"KeyS":this._moveBackward=!0;break;case"ArrowRight":case"KeyD":this._moveRight=!0;break;case"KeyR":this._moveUp=!0;break;case"KeyF":this._moveDown=!0}})),window.addEventListener("keyup",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this._moveForward=!1;break;case"ArrowLeft":case"KeyA":this._moveLeft=!1;break;case"ArrowDown":case"KeyS":this._moveBackward=!1;break;case"ArrowRight":case"KeyD":this._moveRight=!1;break;case"KeyR":this._moveUp=!1;break;case"KeyF":this._moveDown=!1}})),this.domElement.addEventListener("mousedown",(e=>{0===e.button&&(this._activeLook=!0),this._mouseDragOn=!0})),this.domElement.addEventListener("mousemove",(e=>{this._activeLook&&(this._mouseX=e.pageX-this.domElement.offsetLeft-this._viewHalfX,this._mouseY=e.pageY-this.domElement.offsetTop-this._viewHalfY)})),this.domElement.addEventListener("mouseup",(e=>{0===e.button&&(this._activeLook=!1),this._mouseDragOn=!1})),this.domElement.addEventListener("contextmenu",this.contextmenu),this.onResize(),this.setOrientation()}setOrientation(){const e=this.camera.quaternion;a.set(0,0,-1).applyQuaternion(e),r.setFromVector3(a),this._lat=90-s.MathUtils.radToDeg(r.phi),this._lon=s.MathUtils.radToDeg(r.theta)}onResize(){this._viewHalfX=this.domElement.offsetWidth/2,this._viewHalfY=this.domElement.offsetHeight/2}update(e){if(!1===this._enabled)return;if(this._heightSpeed){const t=s.MathUtils.clamp(this.camera.position.y,this._heightMin,this._heightMax)-this._heightMin;this._autoSpeedFactor=e*(t*this._heightCoef)}else this._autoSpeedFactor=0;const t=e*this._movementSpeed;(this._moveForward||this._autoForward&&!this._moveBackward)&&this.camera.translateZ(-(t+this._autoSpeedFactor)),this._moveBackward&&this.camera.translateZ(t),this._moveLeft&&this.camera.translateX(-t),this._moveRight&&this.camera.translateX(t),this._moveUp&&this.camera.translateY(t),this._moveDown&&this.camera.translateY(-t);let i=e*this._lookSpeed;this._activeLook||(i=0);let a=1;this._constrainVertical&&(a=Math.PI/(this._verticalMax-this._verticalMin)),this._lon-=this._mouseX*i,this._lookVertical&&(this._lat-=this._mouseY*i*a),this._lat=Math.max(-85,Math.min(85,this._lat));let r=s.MathUtils.degToRad(90-this._lat);const o=s.MathUtils.degToRad(this._lon);this._constrainVertical&&(r=s.MathUtils.mapLinear(r,0,Math.PI,this._verticalMin,this._verticalMax));const n=this.camera.position,h=new s.Vector3;h.setFromSphericalCoords(1,r,o).add(n),this.camera.lookAt(h)}contextmenu(e){e.preventDefault()}dispose(){}}},535:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(i(924)),r=s(i(767)),o=i(232);t.default=class{constructor(e){this._container=e,this.update=()=>{const e=this._clock.getDelta();this._cameraController.update(e),requestAnimationFrame(this.update),this.renderer.render(this.scene,this._camera)},this.scene=new o.Scene,this._clock=new o.Clock,this._camera=new o.PerspectiveCamera(45,1.25,.01,1e3),this.renderer=new o.WebGLRenderer,this._cameraController=new a.default(this._container,this._camera),this._camera.position.add(new o.Vector3(0,1,0)),this._terrain=new r.default,this._initialize(this._container)}_initialize(e){this.renderer.setSize(window.innerWidth,window.innerHeight),e.appendChild(this.renderer.domElement),window.addEventListener("resize",(e=>{this.onResize(e)}));const t=new o.BoxGeometry(1,1,1),i=new o.MeshBasicMaterial({color:65280}),s=new o.Mesh(t,i);this.scene.add(s),this.scene.add(this._terrain.mesh),this._camera.position.z=5,requestAnimationFrame(this.update)}onResize(e){this._camera.aspect=window.innerWidth/window.innerHeight,this._camera.updateProjectionMatrix(),this.renderer.setSize(this._container.clientWidth,this._container.clientHeight),this._cameraController.onResize()}}},767:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(232),r=s(i(39));t.default=class{constructor(){this._geometry=new a.PlaneGeometry(100,100,100),this._geometry.rotateX(-90*a.MathUtils.DEG2RAD),this._material=new a.MeshBasicMaterial({color:65535}),this._diffused=(new a.TextureLoader).load(r.default),this._diffused.wrapS=a.RepeatWrapping,this._diffused.wrapT=a.RepeatWrapping,this._material.map=this._diffused,this._material.map.repeat=new a.Vector2(50,50),this._mesh=new a.Mesh(this._geometry,this._material)}get mesh(){return this._mesh}}},607:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=s(i(535));t.App=new class{constructor(e){this._initializeView(e),this._engine=new a.default(e)}get Engine(){return this._engine}_initializeView(e){e.style.height="100vh",e.style.width="100%",e.style.background="#646464",e.style.border="1"}}(document.getElementById("gameContainer"))}},i={};function s(e){var a=i[e];if(void 0!==a)return a.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,i,a,r)=>{if(!i){var o=1/0;for(l=0;l<e.length;l++){for(var[i,a,r]=e[l],n=!0,h=0;h<i.length;h++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](i[h])))?i.splice(h--,1):(n=!1,r<o&&(o=r));if(n){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={index:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var a,r,[o,n,h]=i,c=0;if(o.some((t=>0!==e[t]))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(h)var l=h(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(l)},i=self.webpackChunkgame_sample=self.webpackChunkgame_sample||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=s.O(void 0,["vendors"],(()=>s(607)));a=s.O(a)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWFDLEdBQVdGLEVBR2hCeEMsRUFBSSxFQUMzQixHQUFHTCxFQUFTZ0QsTUFBTUMsR0FBZ0MsSUFBeEJSLEVBQWdCUSxLQUFhLENBQ3RELElBQUkzRCxLQUFZd0QsRUFDWnpELEVBQW9CNEIsRUFBRTZCLEVBQWF4RCxLQUNyQ0QsRUFBb0JRLEVBQUVQLEdBQVl3RCxFQUFZeEQsSUFHaEQsR0FBR3lELEVBQVMsSUFBSWhELEVBQVNnRCxFQUFRMUQsRUFDbEMsQ0FFQSxJQURHdUQsR0FBNEJBLEVBQTJCQyxHQUNyRHhDLEVBQUlMLEVBQVNNLE9BQVFELElBQ3pCcUMsRUFBVTFDLEVBQVNLLEdBQ2hCaEIsRUFBb0I0QixFQUFFd0IsRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU9yRCxFQUFvQlMsRUFBRUMsRUFBTyxFQUdqQ21ELEVBQXFCQyxLQUE4Qix3QkFBSUEsS0FBOEIseUJBQUssR0FDOUZELEVBQW1CRSxRQUFRVCxFQUFxQlUsS0FBSyxLQUFNLElBQzNESCxFQUFtQkksS0FBT1gsRUFBcUJVLEtBQUssS0FBTUgsRUFBbUJJLEtBQUtELEtBQUtILEcsS0M3Q3ZGLElBQUlLLEVBQXNCbEUsRUFBb0JTLE9BQUVOLEVBQVcsQ0FBQyxZQUFZLElBQU9ILEVBQW9CLE9BQ25Ha0UsRUFBc0JsRSxFQUFvQlMsRUFBRXlELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvY2h1bmsgbG9hZGVkIiwid2VicGFjazovL2dhbWUtc2FtcGxlLy4vc3JjL2ltZy9ncm91bmRfZ3Jhc3NfZ2VuXzEwLnBuZyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS8uL3NyYy9DYW1lcmFDb250cm9sbGVyLnRzIiwid2VicGFjazovL2dhbWUtc2FtcGxlLy4vc3JjL0dhbWVFbmdpbmUudHMiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvLi9zcmMvVGVycmFpbi50cyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9nYW1lLXNhbXBsZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2dhbWUtc2FtcGxlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vZ2FtZS1zYW1wbGUvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJmZWRjNGQyYmFkOWM4NGM2ODVjMDFiNTA3OTNjMzE1ZS5wbmdcIjsiLCJpbXBvcnQge1xuICAgIEV2ZW50RGlzcGF0Y2hlcixcbiAgICBRdWF0ZXJuaW9uLFxuICAgIFZlY3RvcjMsXG4gICAgUGVyc3BlY3RpdmVDYW1lcmEsXG4gICAgTWF0aFV0aWxzLFxuICAgIFNwaGVyaWNhbFxufSBmcm9tICd0aHJlZSc7XG5cbmNvbnN0IGxvb2tEaXJlY3Rpb24gPSBuZXcgVmVjdG9yMygpO1xuY29uc3Qgc3BoZXJpY2FsID0gbmV3IFNwaGVyaWNhbCgpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmFDb250cm9sbGVyIHtcblxuICAgIHByaXZhdGUgZG9tRWxlbWVudCA6IEhUTUxFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBfZW5hYmxlZCA6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIF9tb3ZlbWVudFNwZWVkIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2xvb2tTcGVlZCA6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX2xvb2tWZXJ0aWNhbCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfYXV0b0ZvcndhcmQgOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfYWN0aXZlTG9vayA6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIF9oZWlnaHRTcGVlZCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfaGVpZ2h0Q29lZiA6IG51bWJlcjtcbiAgICBwcml2YXRlIF9oZWlnaHRNaW4gOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfaGVpZ2h0TWF4IDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfY29uc3RyYWluVmVydGljYWwgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX3ZlcnRpY2FsTWluIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3ZlcnRpY2FsTWF4IDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfbW91c2VEcmFnT24gOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfYXV0b1NwZWVkRmFjdG9yIDogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfbW91c2VYIDogbnVtYmVyO1xuICAgIHByaXZhdGUgX21vdXNlWSA6IG51bWJlcjtcblxuICAgIHByaXZhdGUgX21vdmVGb3J3YXJkIDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9tb3ZlQmFja3dhcmQgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX21vdmVMZWZ0IDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9tb3ZlUmlnaHQgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX21vdmVVcCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfbW92ZURvd24gOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfdmlld0hhbGZYID0gMDtcbiAgICBwcml2YXRlIF92aWV3SGFsZlkgPSAwO1xuXG4gICAgcHJpdmF0ZSBfbGF0IDogbnVtYmVyO1xuICAgIHByaXZhdGUgX2xvbiA6IG51bWJlcjtcblxuXG4gICAgY29uc3RydWN0b3IoZG9tRWxlbWVudCA6IEhUTUxFbGVtZW50LCBwcml2YXRlIGNhbWVyYSA6IFBlcnNwZWN0aXZlQ2FtZXJhKSB7IC8vIEFQSVxuICAgICAgICB0aGlzLl9lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuICAgICAgICB0aGlzLl9tb3ZlbWVudFNwZWVkID0gMS4wO1xuICAgICAgICB0aGlzLl9sb29rU3BlZWQgPSAwLjA1O1xuICAgICAgICB0aGlzLl9sb29rVmVydGljYWwgPSB0cnVlO1xuICAgICAgICB0aGlzLl9hdXRvRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hY3RpdmVMb29rID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2hlaWdodFNwZWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2hlaWdodENvZWYgPSAxLjA7XG4gICAgICAgIHRoaXMuX2hlaWdodE1pbiA9IDAuMDtcbiAgICAgICAgdGhpcy5faGVpZ2h0TWF4ID0gMS4wO1xuICAgICAgICB0aGlzLl9jb25zdHJhaW5WZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1pbiA9IDA7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTWF4ID0gTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9jb25zdHJhaW5WZXJ0aWNhbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbE1pbiA9IDA7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2FsTWF4ID0gTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYXV0b1NwZWVkRmFjdG9yID0gMC4wO1xuICAgICAgICB0aGlzLl9tb3VzZVggPSAwO1xuICAgICAgICB0aGlzLl9tb3VzZVkgPSAwO1xuXG4gICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3ZlTGVmdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbW92ZVVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX21vdmVEb3duID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5fdmlld0hhbGZYID0gMDtcbiAgICAgICAgdGhpcy5fdmlld0hhbGZZID0gMDtcblxuICAgICAgICB0aGlzLl9sYXQgPSAwO1xuICAgICAgICB0aGlzLl9sb24gPSAwO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSA6IEtleWJvYXJkRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdLZXlBJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Uyc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5RCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Uic6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVVcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0tleUYnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSA6IEtleWJvYXJkRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmNvZGUpIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVcnOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5QSc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICBjYXNlICdLZXlTJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUJhY2t3YXJkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5RCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ0tleVInOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlVXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnS2V5Ric6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVEb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlIDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlTG9vayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9tb3VzZURyYWdPbiA9IHRydWU7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUgOiBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVMb29rKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW91c2VYID0gZS5wYWdlWCAtIHRoaXMuZG9tRWxlbWVudC5vZmZzZXRMZWZ0IC0gdGhpcy5fdmlld0hhbGZYO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdXNlWSA9IGUucGFnZVkgLSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0VG9wIC0gdGhpcy5fdmlld0hhbGZZO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCAoZSA6IE1vdXNlRXZlbnQpID0+IHtcblxuICAgICAgICAgICAgc3dpdGNoIChlLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlTG9vayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbW91c2VEcmFnT24gPSBmYWxzZTtcblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLmNvbnRleHRtZW51KTtcblxuXG4gICAgICAgIHRoaXMub25SZXNpemUoKTtcblxuICAgICAgICB0aGlzLnNldE9yaWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgc2V0T3JpZW50YXRpb24oKSB7XG5cbiAgICAgICAgY29uc3QgcXVhdGVybmlvbiA9IHRoaXMuY2FtZXJhLnF1YXRlcm5pb247XG5cbiAgICAgICAgbG9va0RpcmVjdGlvbi5zZXQoMCwgMCwgLSAxKS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbik7XG4gICAgICAgIHNwaGVyaWNhbC5zZXRGcm9tVmVjdG9yMyhsb29rRGlyZWN0aW9uKTtcblxuICAgICAgICB0aGlzLl9sYXQgPSA5MCAtIE1hdGhVdGlscy5yYWRUb0RlZyhzcGhlcmljYWwucGhpKTtcbiAgICAgICAgdGhpcy5fbG9uID0gTWF0aFV0aWxzLnJhZFRvRGVnKHNwaGVyaWNhbC50aGV0YSk7XG5cbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpIHtcblxuICAgICAgICB0aGlzLl92aWV3SGFsZlggPSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xuICAgICAgICB0aGlzLl92aWV3SGFsZlkgPSB0aGlzLmRvbUVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMjtcblxuICAgIH1cblxuICAgIHVwZGF0ZShkZWx0YSA6IG51bWJlcikge1xuXG4gICAgICAgIGlmICh0aGlzLl9lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2hlaWdodFNwZWVkKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoVXRpbHMuY2xhbXAodGhpcy5jYW1lcmEucG9zaXRpb24ueSwgdGhpcy5faGVpZ2h0TWluLCB0aGlzLl9oZWlnaHRNYXgpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0RGVsdGEgPSB5IC0gdGhpcy5faGVpZ2h0TWluO1xuXG4gICAgICAgICAgICB0aGlzLl9hdXRvU3BlZWRGYWN0b3IgPSBkZWx0YSAqIChoZWlnaHREZWx0YSAqIHRoaXMuX2hlaWdodENvZWYpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9hdXRvU3BlZWRGYWN0b3IgPSAwLjA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhY3R1YWxNb3ZlU3BlZWQgPSBkZWx0YSAqIHRoaXMuX21vdmVtZW50U3BlZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX21vdmVGb3J3YXJkIHx8ICh0aGlzLl9hdXRvRm9yd2FyZCAmJiAhdGhpcy5fbW92ZUJhY2t3YXJkKSkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVaKC0oYWN0dWFsTW92ZVNwZWVkICsgdGhpcy5fYXV0b1NwZWVkRmFjdG9yKSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fbW92ZUJhY2t3YXJkKSBcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zbGF0ZVooYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlTGVmdCkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVYKC0gYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlUmlnaHQpIFxuICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNsYXRlWChhY3R1YWxNb3ZlU3BlZWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX21vdmVVcCkgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVZKGFjdHVhbE1vdmVTcGVlZCk7XG4gICAgXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlRG93bikgXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2xhdGVZKC0gYWN0dWFsTW92ZVNwZWVkKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhY3R1YWxMb29rU3BlZWQgPSBkZWx0YSAqIHRoaXMuX2xvb2tTcGVlZDtcblxuICAgICAgICBpZiAoIXRoaXMuX2FjdGl2ZUxvb2spIHtcbiAgICAgICAgICAgIGFjdHVhbExvb2tTcGVlZCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmVydGljYWxMb29rUmF0aW8gPSAxO1xuICAgICAgICBpZiAodGhpcy5fY29uc3RyYWluVmVydGljYWwpIHtcbiAgICAgICAgICAgIHZlcnRpY2FsTG9va1JhdGlvID0gTWF0aC5QSSAvICh0aGlzLl92ZXJ0aWNhbE1heCAtIHRoaXMuX3ZlcnRpY2FsTWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvbiAtPSB0aGlzLl9tb3VzZVggKiBhY3R1YWxMb29rU3BlZWQ7XG4gICAgICAgIGlmICh0aGlzLl9sb29rVmVydGljYWwpIFxuICAgICAgICAgICAgdGhpcy5fbGF0IC09IHRoaXMuX21vdXNlWSAqIGFjdHVhbExvb2tTcGVlZCAqIHZlcnRpY2FsTG9va1JhdGlvO1xuICAgICAgICBcblxuICAgICAgICB0aGlzLl9sYXQgPSBNYXRoLm1heCgtIDg1LCBNYXRoLm1pbig4NSwgdGhpcy5fbGF0KSk7XG5cbiAgICAgICAgbGV0IHBoaSA9IE1hdGhVdGlscy5kZWdUb1JhZCg5MCAtIHRoaXMuX2xhdCk7XG4gICAgICAgIGNvbnN0IHRoZXRhID0gTWF0aFV0aWxzLmRlZ1RvUmFkKHRoaXMuX2xvbik7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NvbnN0cmFpblZlcnRpY2FsKSB7XG4gICAgICAgICAgICBwaGkgPSBNYXRoVXRpbHMubWFwTGluZWFyKHBoaSwgMCwgTWF0aC5QSSwgdGhpcy5fdmVydGljYWxNaW4sIHRoaXMuX3ZlcnRpY2FsTWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYW1lcmEucG9zaXRpb247XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0YXJnZXRQb3NpdGlvbi5zZXRGcm9tU3BoZXJpY2FsQ29vcmRzKDEsIHBoaSwgdGhldGEpLmFkZChwb3NpdGlvbik7XG5cbiAgICAgICAgdGhpcy5jYW1lcmEubG9va0F0KHRhcmdldFBvc2l0aW9uKTtcblxuICAgIH1cblxuICAgIGNvbnRleHRtZW51KGV2ZW50IDogTW91c2VFdmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGRpc3Bvc2UoKSB7IFxuXG4gICAgfTtcblxufVxuIiwiaW1wb3J0IENhbWVyYUNvbnRyb2xsZXIgZnJvbSAnLi9DYW1lcmFDb250cm9sbGVyJztcbmltcG9ydCBUZXJyYWluIGZyb20gJy4vVGVycmFpbic7XG5cbmltcG9ydCB7XG4gICAgU2NlbmUsIFJlbmRlcmVyLCBQZXJzcGVjdGl2ZUNhbWVyYSwgV2ViR0xSZW5kZXJlciwgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIEJveEdlb21ldHJ5LCBDbG9jaywgVmVjdG9yM1xufVxuZnJvbSBcInRocmVlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVFbmdpbmUge1xuICAgIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIF9jYW1lcmE6IFBlcnNwZWN0aXZlQ2FtZXJhO1xuICAgIHByaXZhdGUgX2NhbWVyYUNvbnRyb2xsZXI6IENhbWVyYUNvbnRyb2xsZXI7XG4gICAgcmVuZGVyZXI6IFJlbmRlcmVyO1xuICAgIHByaXZhdGUgX2Nsb2NrOiBDbG9jaztcblxuICAgIHByaXZhdGUgX3RlcnJhaW4gOiBUZXJyYWluO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgICAgIHRoaXMuX2Nsb2NrID0gbmV3IENsb2NrKCk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCAxLjI1LCAuMDEsIDEwMDApO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFdlYkdMUmVuZGVyZXIoKTsgICAgICAgIFxuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyID0gbmV3IENhbWVyYUNvbnRyb2xsZXIodGhpcy5fY29udGFpbmVyLCB0aGlzLl9jYW1lcmEpO1xuICAgICAgICB0aGlzLl9jYW1lcmEucG9zaXRpb24uYWRkKG5ldyBWZWN0b3IzKDAsMSwwKSk7XG5cbiAgICAgICAgdGhpcy5fdGVycmFpbiA9IG5ldyBUZXJyYWluKCk7XG4gICAgICAgIHRoaXMuX2luaXRpYWxpemUodGhpcy5fY29udGFpbmVyKVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHNjZW5lXG4gICAgICogQHBhcmFtIHBhcmVudCBodG1sIG5vZGVcbiAgICAgKi9cbiAgICBwcml2YXRlIF9pbml0aWFsaXplKGNvbnRhaW5lciA6IEhUTUxFbGVtZW50KSB7XG5cblxuXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKGU6VUlFdmVudCk9PiB7IHRoaXMub25SZXNpemUoZSl9KVxuXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEJveEdlb21ldHJ5KDEsIDEsIDEpO1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IDB4MDBmZjAwfSk7XG4gICAgICAgIGNvbnN0IGN1YmUgPSBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuICAgICAgICB0aGlzLnNjZW5lLmFkZChjdWJlKTtcblxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLl90ZXJyYWluLm1lc2gpO1xuXG5cbiAgICAgICAgdGhpcy5fY2FtZXJhLnBvc2l0aW9uLnogPSA1O1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpO1xuICAgIH1cblxuICAgIG9uUmVzaXplKGU6VUlFdmVudCkge1xuICAgICAgICB0aGlzLl9jYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuX2NhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh0aGlzLl9jb250YWluZXIuY2xpZW50V2lkdGgsIHRoaXMuX2NvbnRhaW5lci5jbGllbnRIZWlnaHQpO1xuICAgICAgICB0aGlzLl9jYW1lcmFDb250cm9sbGVyLm9uUmVzaXplKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlID0gKCgpID0+IHsgXG4gICAgICAgIC8vIGdldCBkdFxuICAgICAgICBjb25zdCBkdCA9IHRoaXMuX2Nsb2NrLmdldERlbHRhKCk7XG4gICAgICAgIFxuICAgICAgICAvLyB1cGRhdGUgc3R1ZmZcbiAgICAgICAgdGhpcy5fY2FtZXJhQ29udHJvbGxlci51cGRhdGUoZHQpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpOyBcblxuICAgICAgICAvL3JlbmRlclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLl9jYW1lcmEpOyBcbiAgICB9KTtcblxuXG59XG4iLCJpbXBvcnQge1xuICAgIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBQbGFuZUdlb21ldHJ5LCBNYXRoVXRpbHMsIFRleHR1cmUsIFRleHR1cmVMb2FkZXIsIFZlY3RvcjIsIE1pcnJvcmVkUmVwZWF0V3JhcHBpbmcsIFJlcGVhdFdyYXBwaW5nXG59IGZyb20gJ3RocmVlJztcblxuaW1wb3J0IGdyb3VuZCBmcm9tIFwiLi9pbWcvZ3JvdW5kX2dyYXNzX2dlbl8xMC5wbmdcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVycmFpbiB7XG5cbiAgICBwcml2YXRlIF9tZXNoOiBNZXNoO1xuICAgIHByaXZhdGUgX2dlb21ldHJ5OiBQbGFuZUdlb21ldHJ5O1xuICAgIHByaXZhdGUgX21hdGVyaWFsOiBNZXNoQmFzaWNNYXRlcmlhbDtcbiAgICBwcml2YXRlIF9kaWZmdXNlZDogVGV4dHVyZTtcblxuICAgIGdldCBtZXNoKCkgOiBNZXNoIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21lc2g7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2dlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkoMTAwLCAxMDAsIDEwMCk7XG4gICAgICAgIHRoaXMuX2dlb21ldHJ5LnJvdGF0ZVgoTWF0aFV0aWxzLkRFRzJSQUQgKiAtOTApOyAgICAgICAgXG4gICAgICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogMHgwMGZmZmZ9KTtcbiAgICAgICAgdGhpcy5fZGlmZnVzZWQgPSBuZXcgVGV4dHVyZUxvYWRlcigpLmxvYWQoIGdyb3VuZCApOyAgICAgICAgXG4gICAgICAgIHRoaXMuX2RpZmZ1c2VkLndyYXBTID0gUmVwZWF0V3JhcHBpbmc7XG4gICAgICAgIHRoaXMuX2RpZmZ1c2VkLndyYXBUID0gUmVwZWF0V3JhcHBpbmc7XG5cblxuICAgICAgICB0aGlzLl9tYXRlcmlhbC5tYXAgPSB0aGlzLl9kaWZmdXNlZDtcbiAgICAgICAgdGhpcy5fbWF0ZXJpYWwubWFwLnJlcGVhdCA9IG5ldyBWZWN0b3IyKDUwLDUwKTtcblxuICAgICAgICB0aGlzLl9tZXNoID0gbmV3IE1lc2godGhpcy5fZ2VvbWV0cnksIHRoaXMuX21hdGVyaWFsKTsgICAgICAgIFxuICAgIH1cbn0iLCJpbXBvcnQgeyBHYW1lQ29udGFpbmVyIH0gZnJvbSBcIi4vR2FtZUNvbnRhaW5lclwiO1xuaW1wb3J0IEdhbWVFbmdpbmUgZnJvbSAnLi9HYW1lRW5naW5lJztcblxuY2xhc3MgX0FwcCB7XG4gICAgcHJpdmF0ZSBfZW5naW5lOiBHYW1lRW5naW5lO1xuXG4gICAgZ2V0IEVuZ2luZSgpOiBHYW1lRW5naW5lIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcbiAgICB9ICAgIFxuXG4gICAgY29uc3RydWN0b3Iocm9vdDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVZpZXcocm9vdCk7XG4gICAgICAgIHRoaXMuX2VuZ2luZSA9IG5ldyBHYW1lRW5naW5lKHJvb3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2luaXRpYWxpemVWaWV3KHJvb3Q6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJvb3Quc3R5bGUuaGVpZ2h0ID0gXCIxMDB2aFwiO1xuICAgICAgICByb290LnN0eWxlLndpZHRoID0gXCIxMDAlXCJcbiAgICAgICAgcm9vdC5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjNjQ2NDY0XCI7XG4gICAgICAgIHJvb3Quc3R5bGUuYm9yZGVyID0gXCIxXCI7ICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IEFwcCA9IG5ldyBfQXBwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZUNvbnRhaW5lclwiKSBhcyBIVE1MRWxlbWVudCk7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHRcImluZGV4XCI6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2dhbWVfc2FtcGxlXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2dhbWVfc2FtcGxlXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbXCJ2ZW5kb3JzXCJdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJsb29rRGlyZWN0aW9uIiwiVmVjdG9yMyIsInNwaGVyaWNhbCIsIlNwaGVyaWNhbCIsImNvbnN0cnVjdG9yIiwiZG9tRWxlbWVudCIsImNhbWVyYSIsIl92aWV3SGFsZlgiLCJfdmlld0hhbGZZIiwidGhpcyIsIl9lbmFibGVkIiwiX21vdmVtZW50U3BlZWQiLCJfbG9va1NwZWVkIiwiX2xvb2tWZXJ0aWNhbCIsIl9hdXRvRm9yd2FyZCIsIl9hY3RpdmVMb29rIiwiX2hlaWdodFNwZWVkIiwiX2hlaWdodENvZWYiLCJfaGVpZ2h0TWluIiwiX2hlaWdodE1heCIsIl9jb25zdHJhaW5WZXJ0aWNhbCIsIl92ZXJ0aWNhbE1pbiIsIl92ZXJ0aWNhbE1heCIsIk1hdGgiLCJQSSIsIl9tb3VzZURyYWdPbiIsIl9hdXRvU3BlZWRGYWN0b3IiLCJfbW91c2VYIiwiX21vdXNlWSIsIl9tb3ZlRm9yd2FyZCIsIl9tb3ZlQmFja3dhcmQiLCJfbW92ZUxlZnQiLCJfbW92ZVJpZ2h0IiwiX21vdmVVcCIsIl9tb3ZlRG93biIsIl9sYXQiLCJfbG9uIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb2RlIiwiYnV0dG9uIiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwicGFnZVkiLCJvZmZzZXRUb3AiLCJjb250ZXh0bWVudSIsIm9uUmVzaXplIiwic2V0T3JpZW50YXRpb24iLCJxdWF0ZXJuaW9uIiwic2V0IiwiYXBwbHlRdWF0ZXJuaW9uIiwic2V0RnJvbVZlY3RvcjMiLCJNYXRoVXRpbHMiLCJyYWRUb0RlZyIsInBoaSIsInRoZXRhIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJ1cGRhdGUiLCJkZWx0YSIsImhlaWdodERlbHRhIiwiY2xhbXAiLCJwb3NpdGlvbiIsInkiLCJhY3R1YWxNb3ZlU3BlZWQiLCJ0cmFuc2xhdGVaIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJhY3R1YWxMb29rU3BlZWQiLCJ2ZXJ0aWNhbExvb2tSYXRpbyIsIm1heCIsIm1pbiIsImRlZ1RvUmFkIiwibWFwTGluZWFyIiwidGFyZ2V0UG9zaXRpb24iLCJzZXRGcm9tU3BoZXJpY2FsQ29vcmRzIiwiYWRkIiwibG9va0F0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImRpc3Bvc2UiLCJfY29udGFpbmVyIiwiZHQiLCJfY2xvY2siLCJnZXREZWx0YSIsIl9jYW1lcmFDb250cm9sbGVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyZXIiLCJyZW5kZXIiLCJzY2VuZSIsIl9jYW1lcmEiLCJTY2VuZSIsIkNsb2NrIiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJXZWJHTFJlbmRlcmVyIiwiX3RlcnJhaW4iLCJfaW5pdGlhbGl6ZSIsImNvbnRhaW5lciIsInNldFNpemUiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJhcHBlbmRDaGlsZCIsImdlb21ldHJ5IiwiQm94R2VvbWV0cnkiLCJtYXRlcmlhbCIsIk1lc2hCYXNpY01hdGVyaWFsIiwiY29sb3IiLCJjdWJlIiwiTWVzaCIsIm1lc2giLCJ6IiwiYXNwZWN0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiX2dlb21ldHJ5IiwiUGxhbmVHZW9tZXRyeSIsInJvdGF0ZVgiLCJERUcyUkFEIiwiX21hdGVyaWFsIiwiX2RpZmZ1c2VkIiwiVGV4dHVyZUxvYWRlciIsImxvYWQiLCJ3cmFwUyIsIlJlcGVhdFdyYXBwaW5nIiwid3JhcFQiLCJtYXAiLCJyZXBlYXQiLCJWZWN0b3IyIiwiX21lc2giLCJBcHAiLCJyb290IiwiX2luaXRpYWxpemVWaWV3IiwiX2VuZ2luZSIsIkVuZ2luZSIsInN0eWxlIiwiaGVpZ2h0Iiwid2lkdGgiLCJiYWNrZ3JvdW5kIiwiYm9yZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwicmVzdWx0IiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsInIiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiaW5zdGFsbGVkQ2h1bmtzIiwiY2h1bmtJZCIsIndlYnBhY2tKc29ucENhbGxiYWNrIiwicGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24iLCJkYXRhIiwibW9yZU1vZHVsZXMiLCJydW50aW1lIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsImZvckVhY2giLCJiaW5kIiwicHVzaCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9